<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>04_障碍物反弹</title>
		<style>
			html,
			body {
				overflow: hidden;
			}
			
			#ball {
				position: absolute;
				width: 50px;
				height: 50px;
				border-radius: 50%;
				background: #f00;
			}
			
			#wall {
				position: absolute;
				left: 50%;
				bottom: 150px;
				width: 300px;
				height: 400px;
				background: #cfc;
			}
		</style>
		<script type="text/javascript">
			window.onload = function() {
				var ball = document.getElementById("ball");
				var wall = document.getElementById("wall");

				var hspeed = 15;
				var vspeed = 9;

				setInterval(function() {
					//碰到边缘
					//不断改变水平/垂直反向的反向;
					if (ball.offsetLeft < 0 || ball.offsetLeft > window.innerWidth - ball.offsetWidth ||
						//左侧水平
						((ball.offsetLeft > wall.offsetLeft - ball.offsetWidth
						//右侧水平
						&& ball.offsetLeft < wall.offsetLeft + wall.offsetWidth
						//判断小球不在上下空白处
							)&& (ball.offsetTop > wall.offsetTop - ball.offsetHeight / 2
							&& ball.offsetTop < wall.offsetTop + wall.offsetHeight - ball.offsetHeight / 2))) {
						hspeed *= -1;
					}
					if (ball.offsetTop < 0 || ball.offsetTop > window.innerHeight - ball.offsetHeight ||
						ball.offsetTop > wall.offsetTop - ball.offsetHeight && ball.offsetTop < wall.offsetTop + wall.offsetHeight
						&& ball.offsetLeft > wall.offsetLeft - ball.offsetWidth/2
						&& ball.offsetLeft < wall.offsetLeft + wall.offsetWidth - ball.offsetWidth/2
					) {
						vspeed *= -1;
					}
					ball.style.left = ball.offsetLeft + hspeed + 'px';
					ball.style.top = ball.offsetTop + vspeed + 'px';

				}, 30)

			}
		</script>
	</head>

	<body>
		<div id="ball"></div>
		<div id="wall"></div>
	</body>

</html>