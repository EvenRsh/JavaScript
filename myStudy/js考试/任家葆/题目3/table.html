<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			table {
				margin-top: 20px;
				width: 600px;
				border: 1px solid #ddd;
				border-collapse: collapse;
			}
			
			td {
				border: 1px solid #ddd;
				padding: 5px 10px;
				text-align: center;
			}
			
			.bgColor {
				background-color: orange;
			}
		</style>
		<script>
			window.onload = function() {
				//获取元素
				var checkOut = document.getElementById("checkOut");
				var thBox = document.getElementsByTagName('thead')[0].getElementsByTagName('input')[0];
				var tbBoxs = document.getElementsByTagName('tbody')[0].getElementsByTagName('input');
				var tbTrs = document.getElementsByTagName('tbody')[0].getElementsByTagName('tr');

				//高亮效果

				//全选绑定事件
				thBox.onclick = function() {
						//					console.log(thBox.checked);

						for(var i = 0; i < tbBoxs.length; i++) {
							tbBoxs[i].checked = thBox.checked; //跟随点击事件
							console.log(tbBoxs[i].checked);
							if(tbBoxs[i].checked == true) {
								tbTrs[i].className = 'bgColor';
							} else {
								tbTrs[i].className = '';
							}

						}
					}
					//反选绑定事件
				checkOut.onclick = function() {
					for(var i = 0; i < tbBoxs.length; i++) {
						if(tbBoxs[i].checked) {
							tbBoxs[i].checked = false; //跟随点击事件
						} else {
							tbBoxs[i].checked = true;
						}
						if(tbBoxs[i].checked == true) {
							tbTrs[i].className = 'bgColor';
						} else {
							tbTrs[i].className = '';
						}

					}
				}

				//每个tr的第一个位置的绑定点击事件
				for(var j = 0; j < tbBoxs.length; j++) {
					tbBoxs[j].onclick = function() {
						if(this.checked == true) {
							this.parentElement.parentElement.className = 'bgColor';
						} else {
							this.parentElement.parentElement.className = '';
						}
						
						
						//全选反选效果
						var idx = 1;
						for(var k = 0; k < tbBoxs.length; k++) {
							if(tbBoxs[k].checked == false) {
								thBox.checked = false;
							}
							if(tbBoxs[k].checked) {
								idx++;
								if(idx == tbBoxs.length) {
									thBox.checked = true;
								}
								if(k == tbBoxs.length) {
									idx = 1;
								}
							}
						}
					}
				}

				/*var idx = 1;
				for(var k = 0; k < tbBoxs.length; k++) {
					if(tbBoxs[k].checked == false) {
						thBox.checked = false;
					}
					if(tbBoxs[k]) {
						idx++;
						if(idx == tbBoxs.length) {
							thBox.checked = true;
						}
						if(k == tbBoxs.length) {
							idx = 1;
						}
					}
				}*/

			}
		</script>

	</head>

	<body>
		<button id='checkOut'>反选</button>
		<table>
			<thead>
				<tr>
					<td><input type="checkbox" /></td>
					<td>姓名</td>
					<td>呢称</td>
					<td>性别</td>
					<td>爱好</td>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td><input type="checkbox" /></td>
					<td>刘备</td>
					<td>小刘</td>
					<td>男</td>
					<td>撩妹,装逼,编草鞋</td>
				</tr>
				<tr>
					<td><input type="checkbox" /></td>
					<td>刘备</td>
					<td>小刘</td>
					<td>男</td>
					<td>撩妹,装逼,编草鞋</td>
				</tr>
				<tr>
					<td><input type="checkbox" /></td>
					<td>刘备</td>
					<td>小刘</td>
					<td>男</td>
					<td>撩妹,装逼,编草鞋</td>
				</tr>
				<tr>
					<td><input type="checkbox" /></td>
					<td>刘备</td>
					<td>小刘</td>
					<td>男</td>
					<td>撩妹,装逼,编草鞋</td>
				</tr>
				<tr>
					<td><input type="checkbox" /></td>
					<td>刘备</td>
					<td>小刘</td>
					<td>男</td>
					<td>撩妹,装逼,编草鞋</td>
				</tr>
			</tbody>
		</table>
	</body>

</html>