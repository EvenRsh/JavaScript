<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script type="text/javascript">
        window.onload = function() {
            // 页面进来时，应该是读取cookie，然后获取之前添加过的新闻？
            //没时间做cookie了，就这样凑合吧



            var news = document.getElementById('news');
            var li = news.children;
            console.log(li);
            // 最多显示18个字符，为了凑合写的，真正的最多显示18个字符在下面
            for(var i = 0;i<li.length;i++){
                var _news = li[i].firstElementChild.innerHTML;
                console.log(_news);
                var checklength = _news;
                if(checklength.length>=18){
                    checklength = checklength.slice(0,18) + '...';
                    li[i].firstElementChild.innerHTML = checklength;
                }
            }


            // 添加新闻
            var textarea = document.getElementById('textarea');
            var btn = document.getElementById('btn');
            btn.onclick = function () {
                var _textarea = textarea.value;
                var checklength = _textarea;
                // 添加时最多显示18个字符
                if(checklength.length>=18){
                    checklength = checklength.slice(0,18) + '...';
                }
                if(_textarea.trim() != ''){
                    var newli = document.createElement('li');
                    var newlink = document.createElement('a');
                    newlink.href = '#';
                    newlink.title = _textarea;
                    newlink.innerHTML = checklength;
                    newli.appendChild(newlink);
                    news.insertBefore(newli,news.firstElementChild);
                    textarea.value = '';
                }
                // 设置cookie?

            }

            // 滚动新闻
            var timer = setInterval(function () {
                // 获取第一行新闻
                // var news = document.getElementById('news');
                var firstLi =news.firstElementChild;
                console.log(firstLi);
                news.appendChild(firstLi);
            },2000)

            // 鼠标移入新闻区停止滚动
            news.onmouseover = function () {
                clearInterval(timer);
            }
            // 鼠标移出继续滚动
            news.onmouseout = function () {
                timer = setInterval(function () {
                    // 获取第一行新闻
                    // var news = document.getElementById('news');
                    var firstLi =news.firstElementChild;
                    console.log(firstLi);
                    news.appendChild(firstLi);
                },2000)
            }
        }
    </script>
</head>
<body>
    <h1>滚动新闻</h1>
    <ul id="news">
        <li><a href="#" title="1小明由于调戏老师再次被滚粗教室了哈哈哈">1小明由于调戏老师再次被滚粗教室了哈哈哈</a></li>
        <li><a href="#" title="2小明由于调戏老师再次被滚粗教室了哈哈哈">2小明由于调戏老师再次被滚粗教室了哈哈哈</a></li>
        <li><a href="#" title="3小明由于调戏老师再次被滚粗教室了哈哈哈">3小明由于调戏老师再次被滚粗教室了哈哈哈</a></li>
        <li><a href="#" title="4小明由于调戏老师再次被滚粗教室了哈哈哈">4小明由于调戏老师再次被滚粗教室了哈哈哈</a></li>
    </ul>
    <textarea name="name" rows="8" cols="80" id="textarea"></textarea>
    <div><button type="button" name="button" id="btn">添加</button></div>

</body>
</html>
